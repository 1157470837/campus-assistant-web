<?xml version="1.0" encoding="UTF-8"?>
<!-- DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS HEADER. Copyright 2000-2007 
	Sun Microsystems, Inc. All rights reserved. The contents of this file are 
	subject to the terms of either the GNU General Public License Version 2 only 
	("GPL") or the Common Development and Distribution License("CDDL") (collectively, 
	the "License"). You may not use this file except in compliance with the License. 
	You can obtain a copy of the License at https://glassfish.dev.java.net/public/CDDL+GPL.html 
	or glassfish/bootstrap/legal/LICENSE.txt. See the License for the specific 
	language governing permissions and limitations under the License. When distributing 
	the software, include this License Header Notice in each file and include 
	the License file at glassfish/bootstrap/legal/LICENSE.txt. Sun designates 
	this particular file as subject to the "Classpath" exception as provided 
	by Sun in the GPL Version 2 section of the License file that accompanied 
	this code. If applicable, add the following below the License Header, with 
	the fields enclosed by brackets [] replaced by your own identifying information: 
	"Portions Copyrighted [year] [name of copyright owner]" Contributor(s): If 
	you wish your version of this file to be governed by only the CDDL or only 
	the GPL Version 2, indicate your decision by adding "[Contributor] elects 
	to include this software in this distribution under the [CDDL or GPL Version 
	2] license." If you don't indicate a single choice of license, a recipient 
	has the option to distribute your version of this file under either the CDDL, 
	the GPL Version 2 or to extend the choice of license to its licensees as 
	provided above. However, if you add GPL Version 2 code and therefore, elected 
	the GPL Version 2 license, then the option applies only if the new code is 
	made subject to such option by the copyright holder. -->
<web-app xmlns:javaee="http://java.sun.com/xml/ns/javaee"
	xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
	<javaee:display-name>Campus Assistant Web Application
	</javaee:display-name>
	<!-- 设置上下文键值对 -->
	<context-param>
		<param-name>contextConfigLocation</param-name>
		<param-value>classpath*:beans.xml</param-value>
	</context-param>
		
	<!-- 项目加载后初始化Spring -->
	<listener>
		<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
	</listener>
	
	<!-- 创建ServletContext时激发CleanListener -->
	<listener>
		<listener-class>com.techthinker.CAWeb.web.CleanListener</listener-class>
	</listener>
	
	<!-- 操作Session时激发listener-class -->
	<listener>
		<listener-class>com.techthinker.CAWeb.web.</listener-class>
	</listener>
	
	<!-- 字符编码过滤器 -->
	<filter>
		<filter-name>CharacterEncodingFilter</filter-name>
		<filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
		<init-param>
			<param-name>encoding</param-name>
			<param-value>UTF-8</param-value>
		</init-param>
	</filter>
	<filter-mapping>
		<filter-name>CharacterEncodingFilter</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping>

	<!-- application上下文过滤器 -->
	<filter>
		<filter-name>SystemContextFilter</filter-name>
		<filter-class>com.techthinker.CAWeb.web.SystemContextFilter</filter-class>
	</filter>
	<filter-mapping>
		<filter-name>SystemContextFilter</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping>

	<!-- OpenSessionInView上下文过滤器 -->
	<filter>
		<filter-name>OpenSessionInViewer</filter-name>
		<filter-class>org.springframework.orm.hibernate3.support.OpenSessionInViewFilter</filter-class>
	</filter>
	<filter-mapping>
		<filter-name>OpenSessionInViewer</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping>
	
	<!-- 权限验证过滤器 -->
	<filter>
		<filter-name>AuthFilter</filter-name>
		<filter-class>com.techthinker.CAWeb.web.AuthFilter</filter-class>
	</filter>
	<filter-mapping>
		<filter-name>AuthFilter</filter-name>
		<url-pattern>*.action</url-pattern>
	</filter-mapping>
	<filter-mapping>
		<filter-name>AuthFilter</filter-name>
		<url-pattern>*.do</url-pattern>
	</filter-mapping>
	
	<!-- Struts文过滤器 -->
	<filter>
		<filter-name>struts-prepare</filter-name>
		<filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareFilter</filter-class>
	</filter>
	<filter-mapping>
		<filter-name>struts-prepare</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping>

	<filter>
		<filter-name>struts-execute</filter-name>
		<filter-class>org.apache.struts2.dispatcher.ng.filter.StrutsExecuteFilter</filter-class>
	</filter>
	<filter-mapping>
		<filter-name>struts-execute</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping>
	
	<!-- sitemesh文过滤器 -->
	<filter>
		<filter-name>sitemesh</filter-name>
		<filter-class>com.opensymphony.sitemesh.webapp.SiteMeshFilter</filter-class>
	</filter>
	<filter-mapping>
		<filter-name>sitemesh</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping>
	
	<!-- 项目加载运行InitServlet -->
	<servlet>
		<servlet-name>InitServlet</servlet-name>
		<servlet-class>com.techthinker.CAWeb.web.InitServlet</servlet-class>
		<load-on-startup>1</load-on-startup>
	</servlet>
</web-app>